# Default values for nexo-auth
replicaCount: 1
image:
  repository: quay.io/keycloak/keycloak
  pullPolicy: IfNotPresent
  tag: "23.0"
# Keycloak specific config
command: []
args:
  - start-dev
containerPort: 8080
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""
serviceAccount:
  create: true
  annotations: {}
  name: ""
# CD updates this with commit SHA to force pod restart
podAnnotations:
  app.kubernetes.io/commit: "8796187"
podSecurityContext: {}
securityContext: {}
service:
  type: ClusterIP
  port: 8080
livenessProbe:
  httpGet:
    path: /health/live
    port: http
  initialDelaySeconds: 120
  periodSeconds: 15
  timeoutSeconds: 10
  failureThreshold: 10
readinessProbe:
  httpGet:
    path: /health/ready
    port: http
  initialDelaySeconds: 60
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 10
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: auth.nexo.io
      paths:
        - path: /
          pathType: Prefix
  tls: []
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80
nodeSelector: {}
tolerations: []
affinity: {}
podDisruptionBudget:
  enabled: false
  minAvailable: 1
env:
  NODE_ENV: production
# =============================================================================
# PostgreSQL Configuration for Keycloak persistence
# =============================================================================
postgresql:
  enabled: false
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  database: keycloak
  username: keycloak
  password: keycloak123
  persistence:
    enabled: true
    size: 5Gi
    accessMode: ReadWriteOnce
    storageClass: ""
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi
